<!-- <!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üî• –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ú–∏–Ω–∏-–°–∫–ª–∞–¥</title>
<style>
  :root {
    --bg-dark: #0f0f0f;
    --bg-box-dark: #1d1d1d;
    --text-dark: #eee;
    --border-dark: #333;
    --accent-dark: #00ffc8;
    --shadow-dark: #00ffc860;

    --bg-light: #f0f0f0;
    --bg-box-light: #fff;
    --text-light: #000;
    --border-light: #ccc;
    --accent-light: #008080;
    --shadow-light: #00808066;
  }
  body {
    margin: 0; padding: 40px 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: var(--bg-dark);
    color: var(--text-dark);
    text-align: center;
    transition: background 0.5s, color 0.5s;
    display: none;
  }
  body.light {
    background: var(--bg-light);
    color: var(--text-light);
  }
  h1 {
    color: var(--accent-dark);
    margin-bottom: 10px;
    text-shadow: 0 0 8px var(--shadow-dark);
  }
  body.light h1 {
    color: var(--accent-light);
    text-shadow: 0 0 8px var(--shadow-light);
  }
  .warehouse {
    max-width: 900px;
    margin: 0 auto;
    background: var(--bg-box-dark);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 0 25px var(--shadow-dark);
    transition: background 0.5s;
    position: relative;
  }
  body.light .warehouse {
    background: var(--bg-box-light);
    box-shadow: 0 0 25px var(--shadow-light);
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    table-layout: fixed;
  }
  thead th {
    position: sticky;
    top: 0;
    background: var(--border-dark);
    color: var(--accent-dark);
    border: 1px solid var(--border-dark);
    padding: 12px;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s, color 0.3s;
  }
  body.light thead th {
    background: var(--border-light);
    color: var(--accent-light);
    border: 1px solid var(--border-light);
  }
  thead th:hover {
    background: var(--accent-dark);
    color: var(--bg-dark);
  }
  body.light thead th:hover {
    background: var(--accent-light);
    color: var(--bg-light);
  }
  tbody td {
    border: 1px solid var(--border-dark);
    padding: 12px;
    overflow-wrap: break-word;
  }
  body.light tbody td {
    border: 1px solid var(--border-light);
  }
  tbody tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.05);
    transition: background 0.3s;
  }
  body.light tbody tr:nth-child(even) {
    background: #f9f9f9;
  }
  tbody tr:hover {
    background: #00ffc811;
    transition: background 0.3s;
  }
  body.light tbody tr:hover {
    background: #00808022;
  }
  .controls {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 12px;
  }
  button, input[type="text"], label {
    border-radius: 10px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    padding: 10px 18px;
    font-size: 15px;
    transition: background 0.3s, color 0.3s;
    user-select: none;
  }
  button {
    background: var(--accent-dark);
    color: var(--bg-dark);
  }
  body.light button {
    background: var(--accent-light);
    color: var(--bg-light);
  }
  button:hover {
    background: #00ccaa;
  }
  body.light button:hover {
    background: #006666;
  }
  input[type="text"] {
    border: 1px solid var(--border-dark);
    background: var(--bg-box-dark);
    color: var(--text-dark);
    outline: none;
    width: 230px;
  }
  body.light input[type="text"] {
    border: 1px solid var(--border-light);
    background: var(--bg-box-light);
    color: var(--text-light);
  }
  input[type="text"]:focus {
    border-color: var(--accent-dark);
  }
  body.light input[type="text"]:focus {
    border-color: var(--accent-light);
  }
  .tooltip {
    position: relative;
  }
  .tooltip:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent-dark);
    color: var(--bg-dark);
    padding: 5px 8px;
    border-radius: 6px;
    white-space: nowrap;
    font-size: 13px;
    user-select: none;
    opacity: 0.9;
    pointer-events: none;
  }
  body.light .tooltip:hover::after {
    background: var(--accent-light);
    color: var(--bg-light);
  }
  .status-count, .last-update {
    margin-top: 12px;
    font-size: 15px;
    color: var(--accent-dark);
    user-select: none;
    font-weight: 600;
  }
  body.light .status-count, body.light .last-update {
    color: var(--accent-light);
  }
  .checkboxes {
    margin-top: 15px;
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  .checkboxes label {
    cursor: pointer;
    user-select: none;
    font-size: 14px;
  }
  .checkboxes input[type="checkbox"] {
    margin-right: 6px;
    cursor: pointer;
  }
  #scrollTopBtn {
    position: fixed;
    bottom: 25px;
    right: 25px;
    padding: 12px 18px;
    font-size: 20px;
    border-radius: 50%;
    border: none;
    background: var(--accent-dark);
    color: var(--bg-dark);
    cursor: pointer;
    display: none;
    z-index: 1000;
    box-shadow: 0 0 10px var(--accent-dark);
    transition: background 0.3s;
  }
  #scrollTopBtn:hover {
    background: #00ccaa;
  }
  body.light #scrollTopBtn {
    background: var(--accent-light);
    color: var(--bg-light);
    box-shadow: 0 0 10px var(--accent-light);
  }
  body.light #scrollTopBtn:hover {
    background: #006666;
  }
  .status-icon {
    font-weight: bold;
    font-size: 18px;
    vertical-align: middle;
    margin-right: 6px;
  }
  .status-–í\ –Ω–∞–ª–∏—á–∏–∏ { color: lime; }
  .status-–ú–∞–ª–æ { color: orange; }
  .status-–ù–µ—Ç\ –Ω–∞\ —Å–∫–ª–∞–¥–µ { color: red; }
</style>
</head>
<body>
  <h1>üî• –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ú–∏–Ω–∏-–°–∫–ª–∞–¥</h1>

  <div class="controls">
    <button class="tooltip" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã" onclick="filterStatus('all')">–í—Å–µ</button>
    <button class="tooltip" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ '–í –Ω–∞–ª–∏—á–∏–∏'" onclick="filterStatus('–í –Ω–∞–ª–∏—á–∏–∏')">–í –Ω–∞–ª–∏—á–∏–∏</button>
    <button class="tooltip" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ '–ú–∞–ª–æ'" onclick="filterStatus('–ú–∞–ª–æ')">–ú–∞–ª–æ</button>
    <button class="tooltip" data-tooltip="–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ '–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ'" onclick="filterStatus('–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ')">–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ</button>
    <button class="tooltip" data-tooltip="–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫" onclick="resetFilters()">–°–±—Ä–æ—Å–∏—Ç—å</button>
    <button class="tooltip" data-tooltip="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–≤–µ—Ç–ª—É—é/—Ç—ë–º–Ω—É—é —Ç–µ–º—É" onclick="toggleTheme()">üåô –¢–µ–º–∞</button>
    <button class="tooltip" data-tooltip="–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∏–º—ã–µ —Ç–æ–≤–∞—Ä—ã –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª" onclick="exportData()">üìÑ –≠–∫—Å–ø–æ—Ä—Ç</button>
    <input class="search-input tooltip" data-tooltip="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" type="text" placeholder="üîç –ü–æ–∏—Å–∫..." oninput="searchName(this.value)" />
  </div>

  <div class="checkboxes">
    <label><input type="checkbox" checked onchange="toggleColumn(0)">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É –¢–æ–≤–∞—Ä</label>
    <label><input type="checkbox" checked onchange="toggleColumn(1)">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
    <label><input type="checkbox" checked onchange="toggleColumn(2)">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É –°—Ç–∞—Ç—É—Å</label>
  </div>

  <div class="warehouse">
    <table id="productTable" aria-label="–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ">
      <thead>
        <tr>
          <th onclick="sortTable(0)">–¢–æ–≤–∞—Ä ‚ñ≤‚ñº</th>
          <th onclick="sortTable(1)">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚ñ≤‚ñº</th>
          <th onclick="sortTable(2)">–°—Ç–∞—Ç—É—Å ‚ñ≤‚ñº</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>–ö–æ–ª–∞ 1.5 –ª–∏—Ç—Ä–∞</td>
          <td>4</td>
          <td class="status-–í –Ω–∞–ª–∏—á–∏–∏"><span class="status-icon">‚úì</span>–í –Ω–∞–ª–∏—á–∏–∏</td>
        </tr>
        <tr>
          <td>–•–ª–µ–± –±–µ–ª—ã–π</td>
          <td>1</td>
          <td class="status-–ú–∞–ª–æ"><span class="status-icon">!</span>–ú–∞–ª–æ</td>
        </tr>
        <tr>
          <td>–ú–æ–ª–æ–∫–æ 3.2%</td>
          <td>0</td>
          <td class="status-–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ"><span class="status-icon">‚úó</span>–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ</td>
        </tr>
        <tr>
          <td>–Ø–π—Ü–∞ 10 —à—Ç</td>
          <td>12</td>
          <td class="status-–í –Ω–∞–ª–∏—á–∏–∏"><span class="status-icon">‚úì</span>–í –Ω–∞–ª–∏—á–∏–∏</td>
        </tr>
        <tr>
          <td>–°–∞—Ö–∞—Ä 1 –∫–≥</td>
          <td>2</td>
          <td class="status-–ú–∞–ª–æ"><span class="status-icon">!</span>–ú–∞–ª–æ</td>
        </tr>
        <tr>
          <td>–í–æ–¥–∞ –º–∏–Ω–µ—Ä–∞–ª—å–Ω–∞—è 0.5–ª</td>
          <td>10</td>
          <td class="status-–í –Ω–∞–ª–∏—á–∏–∏"><span class="status-icon">‚úì</span>–í –Ω–∞–ª–∏—á–∏–∏</td>
        </tr>
        <tr>
          <td>–†–∏—Å</td>
          <td>5</td>
          <td class="status-–ú–∞–ª–æ"><span class="status-icon">!</span>–ú–∞–ª–æ</td>
        </tr>
        <tr>
          <td>–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ</td>
          <td>0</td>
          <td class="status-–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ"><span class="status-icon">‚úó</span>–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ</td>
        </tr>
      </tbody>
    </table>

    <div class="status-count" id="statusCount" aria-live="polite"></div>
    <div class="last-update" id="lastUpdate" aria-live="polite"></div>
  </div>

  <button id="scrollTopBtn" title="–ù–∞–≤–µ—Ä—Ö" onclick="scrollToTop()">‚Üë</button>

  <script>
    const correctCode = "918640011";
    let sortDirections = [true, true, true]; // true = asc, false = desc

    window.onload = () => {
      const userCode = prompt("üîê –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞:");
      if (userCode === correctCode) {
        document.body.style.display = "block";
        autoThemeByTime();
        updateStatusCount();
        updateLastUpdate();
        window.addEventListener('scroll', toggleScrollButton);
      } else {
        alert("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥. –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.");
        document.body.innerHTML = "<h2 style='color:red;margin-top:50px;'>‚õî –î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç.</h2>";
      }
    };

    function filterStatus(status) {
      const rows = document.querySelectorAll("#productTable tbody tr");
      const searchQuery = document.querySelector(".search-input").value.trim().toLowerCase();
      rows.forEach(row => {
        const statusText = row.children[2].textContent.trim();
        const nameText = row.children[0].textContent.toLowerCase();
        let visibleByStatus = (status === 'all') || (statusText === status);
        let visibleBySearch = nameText.includes(searchQuery);
        row.style.display = (visibleByStatus && visibleBySearch) ? "" : "none";
      });
      updateStatusCount();
    }

    function searchName(query) {
      query = query.trim().toLowerCase();
      const rows = document.querySelectorAll("#productTable tbody tr");
      const statusButtons = ['all', '–í –Ω–∞–ª–∏—á–∏–∏', '–ú–∞–ª–æ', '–ù–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ'];
      // Find which filter button is active (by checking display)
      let currentFilter = 'all';
      for (const status of statusButtons) {
        const rowsVisible = Array.from(rows).some(r => r.style.display !== "none" && (status === 'all' || r.children[2].textContent.trim() === status));
        if (rowsVisible) currentFilter = status;
      }
      rows.forEach(row => {
        const name = row.children[0].textContent.toLowerCase();
        const statusText = row.children[2].textContent.trim();
        let visibleByStatus = (currentFilter === 'all') || (statusText === currentFilter);
        let visibleBySearch = name.includes(query);
        row.style.display = (visibleByStatus && visibleBySearch) ? "" : "none";
      });
      updateStatusCount();
    }

    function toggleTheme() {
      document.body.classList.toggle("light");
    }

    function autoThemeByTime() {
      const hour = new Date().getHours();
      if (hour >= 7 && hour < 19) {
        document.body.classList.add("light");
      }
    }

    function exportData() {
      const rows = document.querySelectorAll("#productTable tbody tr");
      let text = "–¢–æ–≤–∞—Ä—ã –Ω–∞ —Å–∫–ª–∞–¥–µ:\n\n";
      rows.forEach(row => {
        if (row.style.display !== "none") {
          const cols = row.querySelectorAll("td");
          text += `‚Ä¢ ${cols[0].textContent.trim()} ‚Äî ${cols[1].textContent.trim()} —à—Ç ‚Äî ${cols[2].textContent.trim()}\n`;
        }
      });

      const blob = new Blob([text], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "—Å–∫–ª–∞–¥.txt";
      link.click();
    }

    function updateStatusCount() {
      const rows = document.querySelectorAll("#productTable tbody tr");
      let visibleCount = 0;
      let totalQty = 0;
      rows.forEach(row => {
        if (row.style.display !== "none") {
          visibleCount++;
          const qty = parseInt(row.children[1].textContent);
          totalQty += isNaN(qty) ? 0 : qty;
        }
      });
      document.getElementById("statusCount").textContent =
        `–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–≤–∞—Ä–æ–≤: ${visibleCount}, –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${totalQty}`;
    }

    function updateLastUpdate() {
      const d = new Date();
      const day = String(d.getDate()).padStart(2, '0');
      const month = String(d.getMonth() + 1).padStart(2, '0');
      const year = d.getFullYear();
      document.getElementById("lastUpdate").textContent = `–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${day}.${month}.${year}`;
    }

    function resetFilters() {
      document.querySelector(".search-input").value = '';
      filterStatus('all');
      updateStatusCount();
    }

    function sortTable(colIndex) {
      const table = document.getElementById("productTable");
      const tbody = table.tBodies[0];
      let rows = Array.from(tbody.rows);
      const ascending = sortDirections[colIndex];
      rows.sort((a, b) => {
        let aText = a.cells[colIndex].textContent.trim().toLowerCase();
        let bText = b.cells[colIndex].textContent.trim().toLowerCase();

        // For quantity column (index 1), compare as numbers
        if(colIndex === 1) {
          aText = parseInt(aText);
          bText = parseInt(bText);
          if (isNaN(aText)) aText = 0;
          if (isNaN(bText)) bText = 0;
        }

        if (aText < bText) return ascending ? -1 : 1;
        if (aText > bText) return ascending ? 1 : -1;
        return 0;
      });
      // Append sorted rows back
      rows.forEach(row => tbody.appendChild(row));
      // Toggle sort direction
      sortDirections[colIndex] = !ascending;
    }

    function toggleColumn(index) {
      const table = document.getElementById("productTable");
      const checkedBoxes = document.querySelectorAll(".checkboxes input[type='checkbox']");
      const isVisible = checkedBoxes[index].checked;
      // Toggle header
      table.tHead.rows[0].cells[index].style.display = isVisible ? "" : "none";
      // Toggle each row cell
      Array.from(table.tBodies[0].rows).forEach(row => {
        row.cells[index].style.display = isVisible ? "" : "none";
      });
    }

    function toggleScrollButton() {
      const btn = document.getElementById("scrollTopBtn");
      if (window.pageYOffset > 200) {
        btn.style.display = "block";
      } else {
        btn.style.display = "none";
      }
    }
    function scrollToTop() {
      window.scrollTo({top: 0, behavior: 'smooth'});
    }
  </script>
</body>
</html>
-->
